---
slug: "/introduzindo-o-babel"
title: Por que precisamos do Babel?
date: "2020-09-15"
---

Se voc√™ j√° mexeu pelo menos um pouquinho com desenvolvimento web, ent√£o com certeza j√° ouviu falar ou at√© j√° configurou o **Babel** em um projeto _JavaScript_.
Mas afinal, pra que serve o **Babel**? E que raios ele tem a ver com o **webpack**?

Antes de come√ßar a falar sobre o Babel de fato, primeiro √© interessante entender o problema na web que ele tenta resolver.
Como voc√™ deve saber, os navegadores "entendem" _JavaScript_, e como toda linguagem, o _JavaScript_ possui diferentes vers√µes. De tempos em tempos novas vers√µes s√£o lan√ßadas.
E esse "de tempos em tempos" virou um _anualmente_ a partir de 2015, quando foi lan√ßada a vers√£o 6 do ECMAScript (especifica√ß√£o do _JavaScript_), mais conhecida como ES6 ou ES2015.

Tal vers√£o trouxe grandes mudan√ßas na linguagem em rela√ß√£o √†s vers√µes anteriores e n√£o s√≥ isso, o √≥rg√£o respons√°vel por lan√ßar essas mudan√ßas, o [TC39](https://tc39.es/),
adotou o h√°bito de lan√ßar uma nova vers√£o do _JavaScript_ (a partir de 2015) anualmente. Beleza, mas o que isso tem a ver com o Babel? Calma, vamos chegar l√°.

Bom, imagine esse cen√°rio em que uma nova vers√£o do _JavaScript_, com novas features e especifica√ß√µes, √© lan√ßada todo ano.
Os navegadores que lutem, n√£o √© mesmo? Pois √© isso o que vem acontecendo. Os navegadores em geral t√™m dificuldade pra acompanhar esse avan√ßo da linguagem, e por isso muitas
das features do _JavaScript_ rec√©m-lan√ßadas acabam demorando pra obter um suporte razo√°vel dos navegadores (IE11 que o diga rsrs).
Al√©m disso, o ciclo de releases dos navegadores e tamb√©m as engines que eles utilizam s√£o diferentes entre si. Tudo isso influencia no suporte que um navegador pode oferecer em um determinado momento.

Esse √© o problema que o Babel vem pra resolver \o/
Basicamente ele permite que a gente use essas novas features mais recentes do _JavaScript_ sem perder o suporte do nosso c√≥digo pra vers√µes n√£o t√£o recentes dos navegadores.
No fundo, o que acontece √© um processo de transpila√ß√£o, isto √©, o c√≥digo _JavaScript_ moderno √© transformado para um c√≥digo _JavaScript_ n√£o t√£o moderno, mas que tem um suporte bem maior.
Mais sobre transpila√ß√£o [aqui](https://pt.stackoverflow.com/questions/189894/o-que-%C3%A9-transpila%C3%A7%C3%A3o).

Pra mostrar que isso realmente funciona e que eu n√£o t√¥ enganando voc√™, vou fazer um exemplo pr√°tico.
O que eu vou fazer, basicamente, vai ser pegar um c√≥digo _JavaScript_ com features recentes e servir esse c√≥digo de entrada pro Babel transpilar e gerar um novo c√≥digo como sa√≠da.
Bora ver se d√° certo.

A primeira coisa que eu vou fazer √© criar uma pasta pro nosso projeto de exemplo e inici√°-lo como um reposit√≥rio [npm](https://www.npmjs.com/get-npm).

> O npm √© um gerenciador de pacotes JavaScript e vem junto com o [Node](https://nodejs.org/pt-br/).

O meu projeto vai ser instanciar doguinhos! üê∂üêï

```sh
# crio a pasta e entro nela
$ mkdir dogs && cd dogs

# inicio o reposit√≥rio npm
$ npm init -y
```

Agora posso criar um arquivo _JavaScript_ pra implementar a classe `Dog` e criar inst√¢ncias!

```js
// Dog.js
class Dog {
  constructor(name, breed) {
    this.name = name;
    this.breed = breed; // "breed" √© ra√ßa em ingl√™s rsrs
  }

  printDog() {
    console.log(`${this.name} √© da ra√ßa ${this.breed}`);
  }
}

const greg = new Dog("Greg", "Vira-lata");
greg.printDog();
```

Pra executar e mostrar que o c√≥digo funciona, basta fazer:

```sh
node Dog.js
# "Greg √© da ra√ßa Vira-lata"
```

Perceba que nesse c√≥digo estamos utilizando algumas features recentes do _JavaScript_, como [classes](https://developer.mozilla.org/pt-BR/docs/Web/JavaScript/Reference/Classes),
[template-strings](https://developer.mozilla.org/pt-BR/docs/Web/JavaScript/Reference/template_strings) e [const](https://developer.mozilla.org/pt-BR/docs/Web/JavaScript/Reference/Statements/const).

E por que o Node entende essas features?! Basicamente porque ele usa a mesma engine do Google Chrome, a [V8](https://medium.com/reactbrasil/como-o-javascript-funciona-dentro-da-engine-v8-5-dicas-sobre-como-escrever-c%C3%B3digo-otimizado-e05af6088fd5),
que de modo geral √© a engine com maior suporte pro _JavaScript_ hoje.
Na [documenta√ß√£o do Node](https://nodejs.org/pt-br/docs/es6/), eles explicam um pouquinho melhor sobre isso.

Bom, beleza! Temos nosso c√≥digo "moderno". Bora transpilar ele com a ajuda do Babel.
Pra isso, precisamos instalar alguns pacotes. S√£o eles:

- [@babel/core](https://babeljs.io/docs/en/babel-core)
- [@babel/cli](https://babeljs.io/docs/en/babel-cli)
- [@babel/plugin-transform-classes](https://babeljs.io/docs/en/babel-plugin-transform-classes)
- [@babel/plugin-transform-template-literals](https://babeljs.io/docs/en/babel-plugin-transform-template-literals)
- [@babel/plugin-transform-block-scoping](https://babeljs.io/docs/en/babel-plugin-transform-block-scoping)

> @babel/core √© o pacote base do Babel e @babel/cli √© o pacote que permite que a gente execute comandos do Babel pelo _terminal_

> Os outros pacotes s√£o o que a gente pode chamar de _plugins_ do Babel e cada plugin faz uma transforma√ß√£o espec√≠fica.
> Ent√£o, por exemplo, o pacote `@babel/plugin-transform-classes` transforma classes do ES6+ (que estamos usando no nosso c√≥digo) pra fun√ß√µes construtoras (possuem maior suporte nos navegadores).

```sh
npm install --save-dev @babel/core \
                       @babel/cli \
                       @babel/plugin-transform-classes \
                       @babel/plugin-transform-template-literals \
                       @babel/plugin-transform-block-scoping
```

Ap√≥s isso, o seu `package.json` deve estar mais ou menos assim:

```json
// package.json
...
{
    "devDependencies": {
      "@babel/cli": "^7.11.6",
      "@babel/core": "^7.11.6",
      "@babel/plugin-transform-block-scoping": "^7.11.1",
      "@babel/plugin-transform-classes": "^7.10.4",
      "@babel/plugin-transform-template-literals": "^7.10.5"
  }
}
```

S√≥ uma coisa antes de finalmente transpilarmos o c√≥digo. Precisamos indicar pro Babel quais plugins ele deve usar na transpila√ß√£o.
Pra isso, basta criar o arquivo `.babelrc` com o seguinte c√≥digo:

```json
// .babelrc
{
  "plugins": [
    "@babel/plugin-transform-classes",
    "@babel/plugin-transform-template-literals",
    "@babel/plugin-transform-block-scoping"
  ]
}
```

E agora o grande momento de transpilar o nosso c√≥digo \o/ √â s√≥ fazer:

```sh
npx babel Dog.js --out-file Dog-old.js
```

> O Babel recebe `Dog.js` como entrada e gera `Dog-old.js` como sa√≠da

> A flag `--out-file` √© necess√°ria se voc√™ quiser gerar a sa√≠da em outro arquivo, sen√£o a sa√≠da vai ser pelo console mesmo

E agora vemos que o c√≥digo _JavaScript_ "antigo" √© bem diferente do que o que escrevemos. Ser√° que ele funciona?!
Pra testar, √© s√≥ executar ele com o Node:

```sh
node Dog-old.js
# "Greg √© da ra√ßa Vira-lata"
```

E voil√°! O c√≥digo se mant√©m funcional, como deveria ser. Esse √© o grande poder do Babel! (e de outros transpiladores da comunidade).

E antes de encerrar o post, tem uma dica muito importante que voc√™ deve saber.
Quando instalamos os pacotes, tivemos que analisar feature por feature e instalar um _plugin_ pra cada uma, certo?
O nosso c√≥digo aqui √© pequeno. Mas imagine um c√≥digo extenso, com v√°rios arquivos, por exemplo...teria que instalar plugin por plugin??
A resposta √© **n√£o!** Pra resolver isso, existem pacotes pr√©-configurados que j√° v√™m com v√°rios desses plugins instalados. Podemos citar:

- [@babel/preset-env](https://babeljs.io/docs/en/babel-preset-env)
- [@babel/preset-react](https://babeljs.io/docs/en/babel-preset-react) - _c√≥digo React_
- [@babel/preset-typescript](https://babeljs.io/docs/en/babel-preset-typescript) - _c√≥digo TypeScript_

E a√≠ pra us√°-los, basta instalar igual os plugins. No caso do nosso projeto, ficaria:

```sh
npm install --save-dev @babel/core \
                       @babel/cli \
                       @babel/preset-env
```

E no arquivo `.babelrc`, ao inv√©s de referenciarmos _plugins_, agora referenciamos _presets_:

```json
{
  "presets": ["@babel/preset-env"]
}
```

Bem mais simples n√©! E a√≠ √© s√≥ rodar o Babel e ver que tudo est√° funcionando do mesmo jeito \o/

Muito em breve vou fazer um post espec√≠fico sobre o [webpack](https://webpack.js.org/) e tentar explicar que raios o Babel tem a ver com ele.
At√© l√°! üëã
